<!DOCTYPE html>
<html lang="en">
	<head>
		<title>Relational Landscapes</title>
		<meta charset="utf-8">
        <link rel="shortcut icon" type="image/x-icon" href="favicon.ico">
		<style>
        @font-face {
            font-family: akademieBold;
            src: url(nb_akademie_std_bold.ttf);
        }
        @font-face {
            font-family: akademieMed;
            src: url(nb_akademie_std_medium.ttf);
        }
        @font-face {
            font-family: akademieReg;
            src: url(nb_akademie_std_regular.ttf);
        }
        @font-face {
            font-family: akademieItalic;
            src: url(nb_akademie_std_italic.ttf);
        }
        @font-face {
            font-family: yoppa;
            src: url(Yoppa-Regular.otf);
        }
        body { 
            margin: 0; 
            background-color: #cacad0; 
        }
        a {
            color: #72ff0d;
        }
        a:hover {
            text-decoration: underline;
        }
        .nav {
            font-family: yoppa;
            color: #000bff;
            font-size: max(3vh,30px);
            cursor: pointer;
        }
        .navWrap {
            position: absolute; 
            right: 3vh; 
            bottom: 3vh; 
            text-align: right;
            -moz-user-select: none; 
            -webkit-user-select: none;
            user-select: none;
        }
        .navCircle {
            width: 2.8vh;
            height: 2.8vh; 
            border-radius: 1.4vh; 
            margin-right: 1vh;
            background-color:#000bff;
            display:inline-block; 
            transform: translate(0%,10%);
        }
        .title {
            font-family: yoppa;
            font-size: max(5.5vh,4.5vw);
            color: #fff600;
            pointer-events: none;
            position: absolute;
        }


        .panel {
            height: 100vh;
            width: calc(100vw/3);
            pointer-events: auto;
        }
        .panelAbout {
            background-color: #000bff;
            color: #fff600;
        }
        .panelSchedule {
            background-color: #000bff;
            color: #fff600;
        }
        .panelSchCont {
            background-color: #fff600;
            color: #000bff;
        }
        .panelSpeaker {
            background-color: #000bff;
            color: #fff600;
        }
        .panelImprint {
            background-color: #000bff;
            color: #fff600;
        }


        .headline {
            width: 94%; 
            height: 5%; 
            font-family: yoppa; 
            font-size: max(3vh,25px);
            text-align: center;
            margin: 3%;
        }
        .subHeadline {
            font-size: max(3vh,20px);
            font-family: yoppa; 
        }
        .text {
            font-family: akademieMed;
            font-size: max(1.8vh,14px);
            line-height: 1.2;
        }

        .cont {
            width: 100%;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            padding: 0% 6% 6% 6%;
        }

        .impOrg {
            font-family: akademieItalic;
            font-size: max(1.8vh,14px);
        }
        .fhpLogo {
            width:25%;
            height: 50px;
            background-image: url("FHP-logo.svg");
            background-size: contain;
            background-repeat: no-repeat;
            margin-bottom: 5px;
        }

        .schRow {
            display: inline-block;
            width: 100%;
        }
        .schField {
            width: 50%;
            height: 100%;
            display: inline-block;
            padding: 0.75% 4% 0.75% 4%;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
        }
        .schLeft{
            text-align: left;
        }
        .schRight{
            text-align: right;
        }
        .schLine {
            position: absolute; 
            left: 50%; 
            width: 0.5%; 
            height: 87%; 
            background-color: #fff600;
        }
        .schTime {
            font-family: yoppa;
            font-size: max(2.2vh,18px);
            padding-bottom: 0.8vh;
            display: block;
            cursor: pointer;
        }
        .schTitle {
            font-family: akademieMed;
            font-size: max(1.8vh,14px);
            padding-bottom: 0.4vh;
            line-height: 1.2;
            display: block;
            cursor: pointer;
        }
        .schSpeaker {
            font-family: akademieItalic;
            font-size: max(1.8vh,14px);
            line-height: 1.2;
            display: block;
            cursor: pointer;
        }
        .schCont {
            width: 100%;
            -webkit-box-sizing: border-box;
            -moz-box-sizing: border-box;
            box-sizing: border-box;
            padding: 3% 16% 6% 16%;
        }
        .schClose {
            font-family: yoppa;
            font-size: max(2.5vh,18px);
            position: absolute;
            top: 3%;
            right: 3%;
            cursor: pointer;
        }
		</style>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjs/10.0.0/math.js"></script>
	</head>
	<body>
        <div id="main"></div>
        <div class="navWrap">
            <span id="navAbout" class="nav" onClick="setAnim(0);"><div id="circleAbout" class="navCircle"></div>About</span><br><br>
            <span id="navSchedule" class="nav" onClick="setAnim(1);"><div id="circleSchedule" class="navCircle"></div>Schedule</span><br><br>
            <span id="navSpeakers" class="nav" onClick="setAnim(2);"><div id="circleSpeakers" class="navCircle"></div>Speakers</span><br><br>
            <span id="navImprint" class="nav" onClick="setAnim(3);"><div id="circleImprint" class="navCircle"></div>Imprint</span>
        </div>
        <span class="title" style="top: 3vh; left: 3vh; transform: translate(0%,-10%);">Relational<br>Landscapes</span>
        <span class="title" style="top: 50vh; right: 3vh; transform: translate(0%,-50%);">Symposium</span>
        <span class="title" style="bottom: 5vh; left: 3vh; transform: translate(0%,10%);">Dec 2nd 2021<br>5-7:30pm</span>
        <script type="module">
            window.setAnim=setAnim;
            window.closePanel=closePanel;
            window.openPanel=openPanel;

			import * as THREE from './three/build/three.module.js';

			import { OrbitControls } from './three/examples/jsm/controls/OrbitControls.js';
			import { PCDLoader } from './three/examples/jsm/loaders/PCDLoader.js';
            import { CSS2DRenderer, CSS2DObject } from './three/examples/jsm/renderers/CSS2DRenderer.js';

			let camera, scene, renderer, pointcloud, controls, sphere, labelRenderer;
            let sph=[];
            let sphereMaterial1, sphereMaterial2;
            let animClick=[[0,-136,87,139],[0,-60,-30,147],[0,-41,148,-132],[0,-161,29,183]];
            let animProg=0.0;
            let animTime=0.0;
            let animSrc=[0,0,0,0,0,0]
            let hover=[0,0,0,0];
            let schCont=[];

            const raycaster = new THREE.Raycaster();
            const mouse = new THREE.Vector2();
            
            let p=[ new THREE.Vector3(21, 23, 111), // About
                    new THREE.Vector3(-59, -32, 14), // Schedule
                    new THREE.Vector3(15, 23, -34), // Speakers
                    new THREE.Vector3(-61, 7, 126), // Imprint
                ];

            const c0=new THREE.Color(0,0,0);
            const c1=new THREE.Color(0.0,0.04,1.0);
            const c2=new THREE.Color(0.447,1.0,0.051);

			init();
			

			function init() {

				renderer = new THREE.WebGLRenderer( { antialias: true, logarithmicDepthBuffer: true} );
				renderer.setPixelRatio( window.devicePixelRatio );
				renderer.setSize( window.innerWidth, window.innerHeight );
                renderer.setClearColor(0xcacad0);
				document.getElementById("main").appendChild( renderer.domElement );

				scene = new THREE.Scene();

				camera = new THREE.PerspectiveCamera( 30, window.innerWidth / window.innerHeight, 0.01, 4000 );
				camera.position.set( -297, 50, -246 );
				scene.add( camera );


				controls = new OrbitControls( camera, renderer.domElement );
                controls.enableDamping=true;
                controls.dampingFactor=0.5;
                controls.target.set(-43, -6, -17);
                controls.update();
				controls.addEventListener( 'change', render );
                
				const loader = new PCDLoader();
				loader.load( './pointcloud.pcd', function ( points ) {

					points.geometry.center();
                    points.material.size=2.25;
					scene.add( points );
                    pointcloud=points;
                    render();
				} );
				window.addEventListener( 'resize', onWindowResize );


                const sphereGeometry = new THREE.SphereGeometry( 4, 32, 32 );
                sphereMaterial1 = new THREE.MeshBasicMaterial( { color: c1 } );
                sphereMaterial2 = new THREE.MeshBasicMaterial( { color: c2 } );
                
                for(let i=0; i<=p.length-1; i++){
                    sph[i] = new THREE.Mesh( sphereGeometry, sphereMaterial1 );
                    scene.add(sph[i]);
                    sph[i].position.set(p[i].x,p[i].y,p[i].z);
                }





                const aboutWrap = document.createElement( 'div' );
				aboutWrap.className = 'panel panelAbout';
                aboutWrap.id = 'aboutWrap';

                aboutWrap.innerHTML=""+
                "<div class='headline'>About</div><div class='cont'>" +
                "<span class='schClose' onclick='closePanel(0,0)'>x</span>" +
                "<span class='subHeadline'>Relational Landscapes Symposium</span><br><br><br>"+
                "<span class='text'>Lorem ipsum dolor sit amet, consectetuer adipiscing elit. Aenean commodo ligula eget dolor. Aenean massa. Cum sociis natoque penatibus et magnis dis parturient montes, nascetur ridiculus mus. Donec quam felis, ultricies nec, pellentesque eu, pretium quis, sem. Nulla consequat massa quis enim. Donec pede justo, fringilla vel, aliquet nec, vulputate eget, arcu. In enim justo, rhoncus ut, imperdiet a, venenatis vitae, justo. Nullam dictum felis eu pede mollis pretium. Integer tincidunt. Cras dapibus. Vivamus elementum semper nisi. Aenean vulputate eleifend tellus. Aenean leo ligula, porttitor eu, consequat vitae, eleifend ac, enim. Aliquam lorem ante, dapibus in, viverra quis, feugiat a, tellus. Phasellus viverra nulla ut metus varius laoreet. Quisque rutrum. Aenean imperdiet. Etiam ultricies nisi vel augue. Curabitur ullamcorper ultricies nisi. Nam eget dui. Etiam rhoncus. Maecenas tempus, tellus eget condimentum rhoncus, sem quam semper libero, sit amet adipiscing sem neque sed ipsum. Nam quam nunc, blandit vel, luctus pulvinar, hendrerit id, lorem. Maecenas nec odio et ante tincidunt tempus. Donec vitae sapien ut libero venenatis faucibus. Nullam quis ante. Etiam sit amet orci eget eros faucibus tincidunt. Duis leo. Sed fringilla mauris sit amet nibh. Donec sodales sagittis magna.</span>"

                const objAbout = new CSS2DObject( aboutWrap );
				objAbout.position.set(0,0,0);
                objAbout.visible=false;
				sph[0].add( objAbout );




                const scheduleWrap = document.createElement( 'div' );
				scheduleWrap.className = 'panel panelSchedule';
                scheduleWrap.id = 'scheduleWrap';

                scheduleWrap.innerHTML=""+
                "<div class='headline'>Schedule</div><div style='width:100%; height:87%;'>" +
                    "<div class='schLine'></div>" +
                    "<span class='schClose' onclick='closePanel(1,0)'>x</span>" +
                    "<div class='schRow'><div class='schField schRight'>" +
                            "<span onclick='openPanel(0,0)'><span class='schTime'>05:00 pm</span><span class='schTitle'>Introduction</span><span class='schSpeaker'>&#9679; Myriel Milicevic</span></span>" +
                        "</div><div class='schField schLeft'>" +
                        "</div></div><div class='schRow'><div class='schField schRight'>" +
                        "</div><div class='schField schLeft'>" +
                            "<span onclick='openPanel(1,1)'><span class='schTime'>05:10 pm</span><span class='schTitle'>Moderator</span><span class='schSpeaker'>Alexandra Toland &#9679;</span></span>" +
                        "</div></div><div class='schRow'><div class='schField schRight'>" +
                            "<span onclick='openPanel(0,2)'><span class='schTime'>05:15 pm</span><span class='schTitle'>Seeing the Forest in the Trees: Cosmological Imperialism in<br>Global Forest Monitoring</span><span class='schSpeaker'>&#9679; Birgit Schneider<br>and Lynda C. Olman</span>" +
                        "</div><div class='schField schLeft'>" +
                        "</div></div><div class='schRow'><div class='schField schRight'>" +
                        "</div><div class='schField schLeft'>" +
                            "<span onclick='openPanel(1,3)'><span class='schTime'>05:30 pm</span><span class='schTitle'>Presentation</span><span class='schSpeaker'>Barbara Marcel &#9679;</span>" +
                        "</div></div><div class='schRow'><div class='schField schRight'>" +
                            "<span onclick='openPanel(0,4)'><span class='schTime'>06:00 pm</span><span class='schTitle'>Moderator</span><span class='schSpeaker'>&#9679; Andrés Burbano</span>" +
                        "</div><div class='schField schLeft'>" +
                        "</div></div><div class='schRow'><div class='schField schRight'>" +
                        "</div><div class='schField schLeft'>" +
                            "<span onclick='openPanel(1,5)'><span class='schTime'>06:10 pm</span><span class='schTitle'>Connect - Comprehend - Communicate.<br>Amazonia as a future laboratory</span><span class='schSpeaker'>Thiago da Costa Oliveira<br>and Fidel Thomet &#9679;</span>" +
                        "</div></div><div class='schRow'><div class='schField schRight'>" +
                            "<span onclick='openPanel(0,6)'><span class='schTime'>06:30 pm</span><span class='schTitle'>Presence as Practice</span><span class='schSpeaker'>&#9679; Amy Franceschini</span>" +
                        "</div><div class='schField schLeft'>" +
                        "</div></div><div class='schRow'><div class='schField schRight'>" +
                        "</div><div class='schField schLeft'>" +
                            "<span onclick='openPanel(1,7)'><span class='schTime'>07:00 pm</span><span class='schTitle'>Interview with Arturo Escobar</span><span class='schSpeaker'>Arturo Escobar &#9679;</span> " +
                        "</div></div>" + 
                    "</div>";

				const objSchedule = new CSS2DObject( scheduleWrap );
				objSchedule.position.set(0,0,0);
                objSchedule.visible=false;
				sph[1].add( objSchedule );


                const schContWrap = document.createElement( 'div' );
				schContWrap.className = 'panel panelSchCont';
                schContWrap.id = 'schContWrap';

                let bios=[  ["Andrés Burbano","Andrés Burbano is a scholar and media artist, currently an Associate Professor in the Department of Design at Universidad de los Andes, in Bogota, Colombia. Burbano holds a PhD in Media Arts and Technology from the University of California, and is visiting professor at the Danube University in Krems, Austria. This semester he is a visiting scholar at the University of Applied Sciences Potsdam, Germany."],
                            ["Arturo Escobar","Escobar's approach to anthropology is largely informed by the poststructuralist and postcolonialist traditions and centered around two recent developments: subaltern studies and the idea of a World Anthropologies Network (WAN). His research interests are related to political ecology; the anthropology of development, social movements; Latin American development, and politics. Escobar's research uses critical techniques in his provocative analysis of development discourse and practice in general. He also explores possibilities for alternative visions for a post-development era. He is a major figure in the post-development academic discourse, and a serious critic of development practices championed by western industrialized societies. According to Escobar, the problem with development is that it is external and based on the model of the industrialized world; what is needed instead are more \"endogenous discourses\"(Pieterse, 2010).Arturo Escobar is Kenan Distinguished Professor of Anthropology at the University of North Carolina at Chapel Hill, USA."],
                            ["Amy Franceschini","Amy Franceschini, the founder of Futurefarmers, a group of artists, designers, farmers, and architects with a common interest in creating frameworks of participation that recalibrate our cultural compass. Their work uses various media to enact situations that disassemble habitual apparatus: public policy, urban planning, educational curricula, and public transportation plans. Futurefarmers produce relational sculptures and tools for audiences to gain insight into deeper fields of inquiry—not only to imagine, but also to participate in and initiate change in the places where we live.<br><a href='http://www.futurefarmers.com'>futurfarmers.com</a>"],
                            ["Barbara Marcel",""],
                            ["Myriel Milicevic","Myriel Milicevic is an interaction designer, artist and professor at the Department of Design at the University of Applied Sciences Potsdam. In her work she explores the hidden connections between people and their natural, social and technical environments. This research is mostly participatory in nature and manifests itself in practical utopian models, processes and narratives. They are often realised in collaboration with other artists, scientists and practitioners."],
                            ["Thiago de Oliveira","Thiago da Costa Oliveira is an anthropologist, curator and documentarist currently working as a Humboldt Fellow at the Ethnological Museum and Botanical Garden, Botanical Museum in Berlin. Since 2011, he has been collaboratively working with indigenous people from the Amazon. His projects explore collections of objects, photographs, and sounds as boundary objects to research the art, territory, and technology of the Amazon forest and people."],
                            ["Lynda C. Olman","Lynda C. Olman is a Professor of English at the University of Nevada, Reno. She studies the rhetoric of science—particularly the public reception of visual arguments and of the ethos or public role of the scientist. She is currently editing a volume on non-Western and decolonial rhetorics of science. Her most recent monograph, Scientists as Prophets: A Rhetorical Genealogy (Lynda Walsh, Oxford UP, 2013), traced a dominant strand in the ethos of late-modern science advisers back to its historical roots in religious rhetoric. She is a 2022 recipient of the Friedrich Wilhelm Bessel Research Award for an ongoing project with Prof. Dr. Birgit Schneider (Potsdam U) on the global monitoring of forests for climate management and climate justice, tentatively titled Seeing the Forest in the Trees."],
                            ["Alexandra Toland","Alexandra Toland is a visual artist and environmental planner with research interests in urban ecology, soil and culture, and the Anthropocene. She is Junior Professor for Arts and Research at the Bauhaus-Universität Weimar, where she directs the PhD Programme in Art and Design. She uses a mix of qualitative, discursive, visual and performative methods in her work and embraces feminist and STS approaches to transdisciplinary research."],
                            ["Birgit Schneider","Birgit Schneider is a media and visual studies scholar with a strong interest in environmental humanities. She is professor for knowledge cultures and media environments at Potsdam University, Institute for Arts and Media, European media studies. Her research focus are technical and scientific images with a strong focus on questions of media aesthetics, techné, ecology, maps, diagrams and textility from 17th century till the present. Her current research focuses on the visual communication of climate since 1800 and a genealogy of climate change visualization inbetween science, aesthetics and politics. Her monograph on the subject was published in 2018, entitled Klimabilder. Eine Genealogie der Bildpolitiken von Klima und Klimawandel. Another book on the subject is the edited volume „Image Politics of Climate Change“ (Bielefeld 2014)."],
                ];

                schCont=[
                "<div class='schCont'>" +
                "<span class='schClose' onclick='closePanel(1,1)'>x</span>" +
                "<span class='subHeadline'><center>" + bios[4][0] + "</center></span><br>"+
                "<span class='text'>" + bios[4][1] + "</span>",

                "<div class='schCont'>" +
                "<span class='schClose' onclick='closePanel(1,1)'>x</span>" +
                "<span class='subHeadline'><center>" + bios[7][0] + "</center></span><br>"+
                "<span class='text'>" + bios[7][1] + "</span>",



                ];
                

                const objSchCont = new CSS2DObject( schContWrap );
				objSchCont.position.set(0,0,0);
                objSchCont.visible=false;
				sph[1].add( objSchCont );





                const speakerWrap = document.createElement( 'div' );
				speakerWrap.className = 'panel panelSpeaker';
                speakerWrap.id = 'speakerWrap';

                speakerWrap.innerHTML=""+
                "<div class='headline'>Speakers</div><div class='cont'>" +
                "<span class='schClose' onclick='closePanel(2,0)'>x</span>" +
                "<span class='text'>Andrés Burbano</span><br>"+
                "<span class='impOrg'>Universidad de los Andes</span><br><br>"+
                "<span class='text'>Arturo Escobar</span><br>"+
                "<span class='impOrg'>University of North Carolina at Chapel Hill, USA</span><br><br>"+
                "<span class='text'>Amy Franceschini</span><br>"+
                "<span class='impOrg'>Futurefarmers</span><br><br>"+
                "<span class='text'>Barbara Marcel</span><br>"+
                "<span class='impOrg'></span><br><br>"+
                "<span class='text'>Prof. Myriel Milicevic</span><br>"+
                "<span class='impOrg'>University of Applied Sciences Potsdam</span><br><br>"+
                "<span class='text'>Thiago de Oliveira</span><br>"+
                "<span class='impOrg'>Ethnological Museum Berlin and Botanical Garden Berlin</span><br><br>"+
                "<span class='text'>Lynda C. Olman</span><br>"+
                "<span class='impOrg'>University of Nevada, Reno</span><br><br>"+
                "<span class='text'>Alexandra Toland</span><br>"+
                "<span class='impOrg'>Bauhaus-University Weimar</span><br><br>"+
                "<span class='text'>Birgit Schneider</span><br>"+
                "<span class='impOrg'>University of Potsdam</span>"+
                "</div>"

                const objSpeaker = new CSS2DObject( speakerWrap );
				objSpeaker.position.set(0,0,0);
                objSpeaker.visible=false;
				sph[2].add( objSpeaker );


                const imprintWrap = document.createElement( 'div' );
				imprintWrap.className = 'panel panelImprint';
                imprintWrap.id = 'imprintWrap';

                imprintWrap.innerHTML=""+
                "<div class='headline'>Imprint</div><div class='cont'>" +
                "<span class='schClose' onclick='closePanel(3,0)'>x</span>" +
                "<span class='subHeadline'>Organizers</span><br><br><br>"+
                "<span class='text'>Andrés Burbano</span><br>"+
                "<span class='impOrg'>Universidad de los Andes</span><br><br>"+
                "<span class='text'>Myriel Milicevic</span><br>"+
                "<span class='impOrg'>University of Applied Sciences Potsdam</span><br><br>"+
                "<span class='text'>Thiago de Oliveira</span><br>"+
                "<span class='impOrg'>Ethnological Museum Berlin and Botanical Garden Berlin</span><br><br><br><br>"+
                "<span class='subHeadline'>Web Design</span><br><br><br>"+
                "<span class='text'>Lukas Büttenbender, Tilmann Finner,<br>Victor Molina, Peter Schwarz</span><br>"+
                "<span class='impOrg'>University of Applied Sciences Potsdam</span><br><br><br><br>"+
                "<span class='subHeadline'>Contact</span><br><br><br>"+
                "<div class='fhpLogo'></div><br>"+
                "<span class='text'>University of Applied Sciences Potsdam<br>Kiepenheuerallee 5<br>14469 Potsdam</span><br><br><br><span class='impOrg'>The University of Applied Sciences Potsdam is a public corporation. <br>It is represented by the President Prof. Dr. Eva Schmitt-Rodermund.</span><br><br>"+
                "<span class='text'><a href='https://www.fh-potsdam.de/impressum'>Legal Notice</a><br><a href='https://www.fh-potsdam.de/datenschutzhinweis'>Data Protection</a><br><br>For questions, please email us: <a href='mailto:rlsymposium2021@gmail.com'>rlsymposium2021@gmail.com</a></span><br>"+
                "</div>"
                

                const objImprint = new CSS2DObject( imprintWrap );
				objImprint.position.set(0,0,0);
                objImprint.visible=false;
				sph[3].add( objImprint );


                labelRenderer = new CSS2DRenderer();
				labelRenderer.setSize( window.innerWidth, window.innerHeight );
                labelRenderer.domElement.style.position = 'absolute';
                labelRenderer.domElement.style.top = '0px';
                labelRenderer.domElement.style.pointerEvents = 'none';
				document.getElementById("main").appendChild( labelRenderer.domElement );

			}

			function onWindowResize() {

				camera.aspect = window.innerWidth / window.innerHeight;
				camera.updateProjectionMatrix();

				renderer.setSize( window.innerWidth, window.innerHeight );
                labelRenderer.setSize( window.innerWidth, window.innerHeight );
                render();

			}

            function onMouseMove( event ) {
                mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
                mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
                raycaster.setFromCamera( mouse, camera );
                for(let i=0; i<p.length; i++){
                    if(raycaster.intersectObject(sph[i]).length==1){
                        document.body.style.cursor="pointer";
                        sph[i].material=sphereMaterial2;
                        render();
                        break;
                    } else if(hover[i]==0) {
                        document.body.style.cursor="default";
                        sph[i].material=sphereMaterial1;
                        render();
                    }
                }
            }

            function onPointerDown( event ) {
                if(animTime==0){
                    animSrc[0]=camera.position.x;
                    animSrc[1]=camera.position.y;
                    animSrc[2]=camera.position.z;
                    animSrc[3]=controls.target.x;
                    animSrc[4]=controls.target.y;
                    animSrc[5]=controls.target.z;
                }

                mouse.x = ( event.clientX / window.innerWidth ) * 2 - 1;
                mouse.y = - ( event.clientY / window.innerHeight ) * 2 + 1;
                raycaster.setFromCamera( mouse, camera );
                for(let i=0; i<p.length; i++){
                    if(raycaster.intersectObject(sph[i]).length==1){
                        if(Math.round(camera.position.x)==animClick[i][1] && Math.round(camera.position.y)==animClick[i][2] && Math.round(camera.position.z)==animClick[i][3]){
                            sph[i].children[0].visible=true;
                            render();
                        } else {
                            setAnim(i);
                        }
                    }
                }
            }

            function setAnim(c){
                if(animTime==0){
                    for(let i=0;i<p.length;i++){
                        sph[i].children[0].visible=false;
                    }
                    animClick[c][0]=1;
                    animate();
                }
            }

            function closePanel(id,ch){
                sph[id].children[ch].visible=false;
                render();
            }

            function openPanel(s, id){
                if(s==0){
                    sph[1].children[1].offset.x="-150%";
                } else {
                    sph[1].children[1].offset.x="50%";
                }
                document.getElementById("schContWrap").innerHTML=schCont[id];
                sph[1].children[1].visible=true;
                render();
            }

            function camAnim(){
                let pos = new THREE.Vector3;
                let tar = new THREE.Vector3;
                for(let i=0; i<animClick.length;i++){
                    if(animClick[i][0]==1){
                        pos.lerpVectors(new THREE.Vector3(animSrc[0],animSrc[1],animSrc[2]),new THREE.Vector3(animClick[i][1],animClick[i][2],animClick[i][3]), animProg);               
                        tar.lerpVectors(new THREE.Vector3(animSrc[3],animSrc[4],animSrc[5]),new THREE.Vector3(p[i].x, p[i].y, p[i].z), animProg);
                        controls.target.set(tar.x, tar.y, tar.z);
                        camera.position.set(pos.x,pos.y,pos.z);
                        if(animTime>=1.0){
                            animTime=0.0;
                            animClick[i][0]=0;
                            for(let k=0;k<p.length;k++){
                                if(i==k){
                                    sph[k].children[0].visible=true;
                                }
                            }
                        } else {
                            animTime+=0.015;
                            animProg=easeOutCubic(animTime, 0.0, 1.0, 1.0);
                        }
                    }
                }
            }


            function easeOutCubic (t, b, c, d) {
                return c * ((t = t / d - 1) * t * t + 1) + b;
            }



            function animate() {
                for(let i=0; i<animClick.length;i++){
                    if(animClick[i][0]==1){
                        requestAnimationFrame(animate);
                        camAnim();
                        controls.update();
                        render();
                    }
                }
            }


			function render() {
                renderer.render(scene, camera);
                labelRenderer.render( scene, camera );
            }


            function mapRange (value, a, b, c, d) {
                value = (value - a) / (b - a);
                return c + value * (d - c);
            }

            function clamp(val, min, max) {
                return val > max ? max : val < min ? min : val;
            }

            window.addEventListener( "mousemove", onMouseMove, false );
            window.addEventListener( "pointerdown", onPointerDown, false );

            window.onload=function(){
                const delta = 6;
                let startX;
                let startY;
                let cv=document.getElementsByTagName("canvas")[0];

                cv.addEventListener('mousedown', function (event) {
                    startX = event.pageX;
                    startY = event.pageY;
                });

                cv.addEventListener('mouseup', function (event) {
                    const diffX = Math.abs(event.pageX - startX);
                    const diffY = Math.abs(event.pageY - startY);

                    if (diffX < delta && diffY < delta) {
                        for(let i=0;i<p.length;i++){
                            sph[i].children[0].visible=false;
                        }
                        render();
                    }
                });

                let nav=document.getElementsByClassName("nav");
                let navC=document.getElementsByClassName("navCircle");
                for(let i=0; i<nav.length;i++) {
                    nav[i].onmouseover=function(){setNavColor(i,1)};
                    nav[i].onmouseout=function(){setNavColor(i,0)};
                    nav[i].onmouseup=function(){setNavColor(i,0)};
                }
                for(let i=0; i<navC.length;i++) {
                    navC[i].onmouseover=function(){setNavColor(i,1)};
                    navC[i].onmouseout=function(){setNavColor(i,0)};
                    navC[i].onmouseup=function(){setNavColor(i,0)};
                }

                function setNavColor(id, c){
                    if(c==0){
                        nav[id].style.color="#000bff";
                        navC[id].style.backgroundColor="#000bff";
                        sph[id].material=sphereMaterial1;
                        hover[id]=0;
                    } else {
                        nav[id].style.color="#72ff0d";
                        navC[id].style.backgroundColor="#72ff0d";
                        sph[id].material=sphereMaterial2;
                        hover[id]=1;
                    }
                    render();
                }
            }
            
		</script>
	</body>
</html>